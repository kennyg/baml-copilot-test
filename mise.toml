[tools]
python = "3.12"

[tasks.setup]
description = "Create venv and install dependencies"
run = "uv sync"

[tasks.discover]
description = "Discover available models and generate clients"
run = "uv run python generate_clients.py"

[tasks.generate]
description = "Generate BAML client"
run = "uv run baml-cli generate"

[tasks.proxy]
description = "Start LiteLLM proxy (run in separate terminal)"
run = """
if [ -f litellm_config.yaml ]; then
  uv run litellm --config litellm_config.yaml --port 4000
else
  echo "Using default config (run 'mise run discover' to detect available models)"
  uv run litellm --config litellm_config.default.yaml --port 4000
fi
"""

[tasks.check]
description = "Check LiteLLM connection"
run = "uv run python check_litellm.py"

[tasks.test]
description = "Run full BAML tests"
run = "uv run python test_copilot.py"

[tasks.models]
description = "List available models from LiteLLM proxy"
run = "uv run python list_models.py"

[tasks.clean]
description = "Clean generated files"
run = "rm -rf baml_client/ .venv/ __pycache__/"
